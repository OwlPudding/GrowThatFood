<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Who Eats the Food We Grow?</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="text-content">
    <h1>Who Eats the Food We Grow?</h1>
    <h3>Putting Global Food Trade Into Perspective</h3>
    <i><u>By:</u> Alex Anthony Cortes-Ose, Xabi Peralta, The Ngo</i>
    <a href="#writeup">Read about how we built this visualization!</a>
  </div>
  <br/><br/>
  <!-- <div class="content">
    some dope content about global food trade yo
  </div> -->
  <div id="background-wrapper">
    <div id="main">
      <div id="top">
        <span id="year"></span>
        <input type="range" min="1990" max="2018" value="2005" id="year-slider">
        <form class="switch-field" name="myForm">
          <input type="radio" id="Export-toggle" name="switchType" value="Export" checked/>
          <label for="Export-toggle">Export</label>
          <input type="radio" id="Import-toggle" name="switchType" value="Import" />
          <label for="Import-toggle">Import</label>
        </form>
      </div>
      <div id="center">
        <div id="canvas">
        </div>
        <div id="panel">
          <h3 id="start-message">Click START<br>to load global food trade data!</h3>
          <p id="start-message-subtitle">Because of the sheer amount of data to load, this may take up to 40 seconds<br><br>--</p>
          <ol>
            <li>Select a year with the slider above</li>
            <br>
            <li>Select either import or export</li>
            <br>
            <li>Pick a food category from the menu below</li>
            <br>
            <li>Click a country or choose from the list of countries below to see its global imports or exports of your chosen food item</li>
            <br>
            <li>In the results pane, click “imports” to see that country’s imports or exports of your chosen food item for the selected year</li>
          </ol>
          <span id="warning"></span>
        </div>
      </div>
      <div id="bottom">
        <div id="food-list">
          <div id="Apples" class="food">Apples</div>
          <div id="Avocados" class="food">Avocados</div>
          <div id="Bananas & plantains" class="food">Bananas & plantains</div>
          <div id="Beans & Legumes" class="food">Beans & Legumes</div>
          <div id="Beef" class="food">Beef</div>
          <div id="Berries" class="food">Berries</div>
          <div id="Bread" class="food">Bread</div>
          <div id="Butter" class="food">Butter</div>
          <div id="Cheese" class="food">Cheese</div>
          <div id="Chicken" class="food">Chicken</div>
          <div id="Chocolate" class="food">Chocolate</div>
          <div id="Coffee" class="food">Coffee</div>
          <div id="Corn" class="food">Corn</div>
          <div id="Dairy" class="food">Dairy</div>
          <div id="Eggs" class="food">Eggs</div>
          <div id="Flour" class="food">Flour</div>
          <div id="Fruits" class="food">Fruits</div>
          <div id="Grains" class="food">Grains</div>
          <div id="Juice" class="food">Juice</div>
          <div id="Lamb" class="food">Lamb</div>
          <div id="Leafy Greens" class="food">Leafy Greens</div>
          <div id="Milk" class="food">Milk</div>
          <div id="Nuts" class="food">Nuts</div>
          <div id="Oil" class="food">Oil</div>
          <div id="Pasta" class="food">Pasta</div>
          <div id="Pork" class="food">Pork</div>
          <div id="Potatoes" class="food">Potatoes</div>
          <div id="Rice" class="food">Rice</div>
          <div id="Seeds" class="food">Seeds</div>
          <div id="Spices" class="food">Spices</div>
          <div id="Sugar" class="food">Sugar</div>
          <div id="Tea" class="food">Tea</div>
          <div id="Vegetables" class="food">Vegetables</div>
          <div id="Yogurt" class="food">Yogurt</div>
        </div>
        <div id="country-list">
          <div id="AFG" class="country-item">Afghanistan</div>
          <div id="AGO" class="country-item">Angola</div>
          <div id="ALB" class="country-item">Albania</div>
          <div id="ARE" class="country-item">United Arab Emirates</div>
          <div id="ARG" class="country-item">Argentina</div>
          <div id="ARM" class="country-item">Armenia</div>
          <div id="ATG" class="country-item">Antigua and Barbuda</div>
          <div id="AUS" class="country-item">Australia</div>
          <div id="AUT" class="country-item">Austria</div>
          <div id="AZE" class="country-item">Azerbaijan</div>
          <div id="BDI" class="country-item">Burundi</div>
          <div id="BEL" class="country-item">Belgium</div>
          <div id="BEN" class="country-item">Benin</div>
          <div id="BFA" class="country-item">Burkina Faso</div>
          <div id="BGD" class="country-item">Bangladesh</div>
          <div id="BGR" class="country-item">Bulgaria</div>
          <div id="BHR" class="country-item">Bahrain</div>
          <div id="BHS" class="country-item">Bahamas</div>
          <div id="BIH" class="country-item">Bosnia and Herzegovina</div>
          <div id="BLR" class="country-item">Belarus</div>
          <div id="BLZ" class="country-item">Belize</div>
          <div id="BOL" class="country-item">Bolivia</div>
          <div id="BRA" class="country-item">Brazil</div>
          <div id="BRB" class="country-item">Barbados</div>
          <div id="BRN" class="country-item">Brunei Darussalam</div>
          <div id="BTN" class="country-item">Bhutan</div>
          <div id="BWA" class="country-item">Botswana</div>
          <div id="CAF" class="country-item">Central African Republic</div>
          <div id="CAN" class="country-item">Canada</div>
          <div id="CHE" class="country-item">Switzerland</div>
          <div id="CHL" class="country-item">Chile</div>
          <div id="CHN" class="country-item">China</div>
          <div id="CIV" class="country-item">Côte d'Ivoire</div>
          <div id="CMR" class="country-item">Cameroon</div>
          <div id="COD" class="country-item">Democratic Republic of the Congo</div>
          <div id="COG" class="country-item">Congo</div>
          <div id="COL" class="country-item">Colombia</div>
          <div id="COM" class="country-item">Comoros</div>
          <div id="CPV" class="country-item">Cabo Verde</div>
          <div id="CRI" class="country-item">Costa Rica</div>
          <div id="CUB" class="country-item">Cuba</div>
          <div id="CYP" class="country-item">Cyprus</div>
          <div id="CZE" class="country-item">Czechia</div>
          <div id="DEU" class="country-item">Germany</div>
          <div id="DJI" class="country-item">Djibouti</div>
          <div id="DNK" class="country-item">Denmark</div>
          <div id="DOM" class="country-item">Dominica</div>
          <div id="DZA" class="country-item">Algeria</div>
          <div id="ECU" class="country-item">Ecuador</div>
          <div id="EGY" class="country-item">Egypt</div>
          <div id="ERI" class="country-item">Eritrea</div>
          <div id="ESP" class="country-item">Spain</div>
          <div id="EST" class="country-item">Estonia</div>
          <div id="ETH" class="country-item">Ethiopia</div>
          <div id="FIN" class="country-item">Finland</div>
          <div id="FJI" class="country-item">Fiji</div>
          <div id="FRA" class="country-item">France</div>
          <div id="FRO" class="country-item">Faroe Islands</div>
          <div id="FSM" class="country-item">Micronesia (Federated States of)</div>
          <div id="GAB" class="country-item">Gabon</div>
          <div id="GBR" class="country-item">United Kingdom</div>
          <div id="GEO" class="country-item">Georgia</div>
          <div id="GHA" class="country-item">Ghana</div>
          <div id="GIN" class="country-item">Guinea</div>
          <div id="GMB" class="country-item">Gambia</div>
          <div id="GNB" class="country-item">Guinea-Bissau</div>
          <div id="GNQ" class="country-item">Equatorial Guinea</div>
          <div id="GRC" class="country-item">Greece</div>
          <div id="GRD" class="country-item">Grenada</div>
          <div id="GTM" class="country-item">Guatemala</div>
          <div id="GUY" class="country-item">Guyana</div>
          <div id="HKG" class="country-item">Hong Kong</div>
          <div id="HND" class="country-item">Honduras</div>
          <div id="HRV" class="country-item">Croatia</div>
          <div id="HTI" class="country-item">Haiti</div>
          <div id="HUN" class="country-item">Hungary</div>
          <div id="IDN" class="country-item">Indonesia</div>
          <div id="IND" class="country-item">India</div>
          <div id="IRL" class="country-item">Ireland</div>
          <div id="IRN" class="country-item">Iran</div>
          <div id="IRQ" class="country-item">Iraq</div>
          <div id="ISL" class="country-item">Iceland</div>
          <div id="ISR" class="country-item">Israel</div>
          <div id="ITA" class="country-item">Italy</div>
          <div id="JAM" class="country-item">Jamaica</div>
          <div id="JOR" class="country-item">Jordan</div>
          <div id="JPN" class="country-item">Japan</div>
          <div id="KAZ" class="country-item">Kazakhstan</div>
          <div id="KEN" class="country-item">Kenya</div>
          <div id="KGZ" class="country-item">Kyrgyzstan</div>
          <div id="KHM" class="country-item">Cambodia</div>
          <div id="KIR" class="country-item">Kiribati</div>
          <div id="KNA" class="country-item">Saint Kitts and Nevis</div>
          <div id="KOR" class="country-item">South Korea</div>
          <div id="KWT" class="country-item">Kuwait</div>
          <div id="LAO" class="country-item">Laos</div>
          <div id="LBN" class="country-item">Lebanon</div>
          <div id="LBR" class="country-item">Liberia</div>
          <div id="LBY" class="country-item">Libya</div>
          <div id="LCA" class="country-item">Saint Lucia</div>
          <div id="LKA" class="country-item">Sri Lanka</div>
          <div id="LSO" class="country-item">Lesotho</div>
          <div id="LTU" class="country-item">Lithuania</div>
          <div id="LUX" class="country-item">Luxembourg</div>
          <div id="LVA" class="country-item">Latvia</div>
          <div id="MAC" class="country-item">Macao SAR: China</div>
          <div id="MAF" class="country-item">St. Martin (French part)</div>
          <div id="MAR" class="country-item">Morocco</div>
          <div id="MCO" class="country-item">Monaco</div>
          <div id="MDA" class="country-item">Republic of Moldova</div>
          <div id="MDG" class="country-item">Madagascar</div>
          <div id="MDV" class="country-item">Maldives</div>
          <div id="MEX" class="country-item">Mexico</div>
          <div id="MHL" class="country-item">Marshall Islands</div>
          <div id="MKD" class="country-item">North Macedonia</div>
          <div id="MLI" class="country-item">Mali</div>
          <div id="MLT" class="country-item">Malta</div>
          <div id="MMR" class="country-item">Myanmar</div>
          <div id="MNE" class="country-item">Montenegro</div>
          <div id="MNG" class="country-item">Mongolia</div>
          <div id="MOZ" class="country-item">Mozambique</div>
          <div id="MRT" class="country-item">Mauritania</div>
          <div id="MUS" class="country-item">Mauritius</div>
          <div id="MWI" class="country-item">Malawi</div>
          <div id="MYS" class="country-item">Malaysia</div>
          <div id="NAM" class="country-item">Namibia</div>
          <div id="NCL" class="country-item">New Caledonia</div>
          <div id="NER" class="country-item">Niger</div>
          <div id="NGA" class="country-item">Nigeria</div>
          <div id="NIC" class="country-item">Nicaragua</div>
          <div id="NLD" class="country-item">Netherlands</div>
          <div id="NOR" class="country-item">Norway</div>
          <div id="NPL" class="country-item">Nepal</div>
          <div id="NRU" class="country-item">Nauru</div>
          <div id="NZL" class="country-item">New Zealand</div>
          <div id="OMN" class="country-item">Oman</div>
          <div id="PAK" class="country-item">Pakistan</div>
          <div id="PAN" class="country-item">Panama</div>
          <div id="PER" class="country-item">Peru</div>
          <div id="PHL" class="country-item">Philippines</div>
          <div id="PNG" class="country-item">Papua New Guinea</div>
          <div id="POL" class="country-item">Poland</div>
          <div id="PRI" class="country-item">Puerto Rico</div>
          <div id="PRT" class="country-item">Portugal</div>
          <div id="PRY" class="country-item">Paraguay</div>
          <div id="PYF" class="country-item">French Polynesia</div>
          <div id="QAT" class="country-item">Qatar</div>
          <div id="ROU" class="country-item">Romania</div>
          <div id="RUS" class="country-item">Russian Federation</div>
          <div id="RWA" class="country-item">Rwanda</div>
          <div id="SAU" class="country-item">Saudi Arabia</div>
          <div id="SDN" class="country-item">Sudan</div>
          <div id="SEN" class="country-item">Senegal</div>
          <div id="SGP" class="country-item">Singapore</div>
          <div id="SLB" class="country-item">Solomon Islands</div>
          <div id="SLE" class="country-item">Sierra Leone</div>
          <div id="SLV" class="country-item">El Salvador</div>
          <div id="SOM" class="country-item">Somalia</div>
          <div id="SRB" class="country-item">Serbia</div>
          <div id="SSD" class="country-item">South Sudan</div>
          <div id="STP" class="country-item">Sao Tome and Principe</div>
          <div id="SUR" class="country-item">Suriname</div>
          <div id="SVK" class="country-item">Slovakia</div>
          <div id="SVN" class="country-item">Slovenia</div>
          <div id="SWE" class="country-item">Sweden</div>
          <div id="SWZ" class="country-item">Eswatini</div>
          <div id="SYC" class="country-item">Seychelles</div>
          <div id="SYR" class="country-item">Syrian Arab Republic</div>
          <div id="TCD" class="country-item">Chad</div>
          <div id="TGO" class="country-item">Togo</div>
          <div id="THA" class="country-item">Thailand</div>
          <div id="TJK" class="country-item">Tajikistan</div>
          <div id="TKM" class="country-item">Turkmenistan</div>
          <div id="TLS" class="country-item">Timor-Leste</div>
          <div id="TON" class="country-item">Tonga</div>
          <div id="TTO" class="country-item">Trinidad and Tobago</div>
          <div id="TUN" class="country-item">Tunisia</div>
          <div id="TUR" class="country-item">Turkey</div>
          <div id="TUV" class="country-item">Tuvalu</div>
          <div id="TZA" class="country-item">United Republic of Tanzania</div>
          <div id="UGA" class="country-item">Uganda</div>
          <div id="UKR" class="country-item">Ukraine</div>
          <div id="URY" class="country-item">Uruguay</div>
          <div id="USA" class="country-item">United States of America</div>
          <div id="UZB" class="country-item">Uzbekistan</div>
          <div id="VCT" class="country-item">Saint Vincent and the Grenadines</div>
          <div id="VEN" class="country-item">Venezuela</div>
          <div id="VNM" class="country-item">Vietnam</div>
          <div id="VUT" class="country-item">Vanuatu</div>
          <div id="WLD" class="country-item">World</div>
          <div id="WSM" class="country-item">Samoa</div>
          <div id="YEM" class="country-item">Yemen</div>
          <div id="ZAF" class="country-item">South Africa</div>
          <div id="ZMB" class="country-item">Zambia</div>
          <div id="ZWE" class="country-item">Zimbabwe</div>
        </div>
      </div>
    </div>
    <div id="writeup">
      <h2>How We Built This</h2>
      <span class="header">Introduction </span><i>The problem + motivation</i>
      <p>We were interested in answering the question “who eats the food we grow?” and exploring where exactly the food that we eat grows. It is common knowledge that a large amount of our food is not grown within our home countries, but knowledge about the path it takes and the countries it travels from is not easily accessible to the public. Several large networks of trade connect each country to many others, especially in terms of food. Thus, our motivation for this exploration is to understand the global journey that food takes to get to our dinner table and put into perspective the well-being of and other information about the countries involved in getting it there.</p>
      <span class="header">Related Work </span><i>Prior research and work in the subject matter</i>
      <p>Most of the previous work in tracking export and import data is from the Food and Agriculture Organization of the United Nations. They maintain a food and agricultural trade dataset which includes all transactions of food and agricultural products traded annually since the 1960s by all countries in the world.</p>
      <span class="header">Methodology </span><i>The data, analysis, techniques and algorithms</i>
      <p>We gathered our food exports and imports data from the Food and Agriculture Organization of the United Nations(FAO) and our GDP, Population, and Undernourishment data from the World Bank of Data. The food imports and exports data originally contained 5.7 million rows and they were cleaned down to 970,000 through a SQL + python Pandas pipeline. This involved aggregating foods into more general categories, removing duplicate or null entries, and maintaining a smaller and more consistent country list. The GDP, Population, and Undernourishment data was significantly smaller but we still needed to remove predefined country groupings which we could not show on the map and had to change naming conventions to match the import export data. The food import and export data is loaded and queried with dataframe-js which closely mimics the behavior of a system like Pandas, and the World Bank data sets were preprocessed and saved as json objects with JavaScript’s Object.reduce() method.</p>
      <span class="header">Design </span><i>Visual and interaction encodings + abandoned iterations</i>
      <p>Through the course of our design process, we went through multiple iterations of potential designs for our visualization. We wanted to choose encodings that encourage exploration and allow people to reach their own conclusions about interesting questions they had. For one of our first potential designs, we thought about using a supermarket layout that would allow people to pick out specific items and find out various information about their groceries. We decided to move away from this because of the lack of accurate data on food waste and the immense formatting tasks we would have to undertake to get it working. We then shifted our focus to utilizing a map, encoding food exports and imports as lines similar to flight paths on a travel map, and a dashboard set up with conditional buttons and panels displaying important information. We also added a “cross-reference” button to allow users to explore other import or export partners for a given food + country pair.</p>
      <span class="header">Implementation </span><i>Libraries, tools, platforms, performance, and loading data</i>
      <p>d3.js was used to create the map visualization. We ran into many data loading issues and because of large file sizes put the import and export data on a paid GitHub LFS plan. Performance issues presented themselves primarily in terms of how large our original dataset was - we improved loading time by cleaning the data and removing entries we did not need as previously discussed.</p>
      <span class="header">Discussion </span><i>Design success, reactions, critiques, and insights</i>
      <p>Our visualization was successful in fulfilling our main goal of encouraging exploration. In our showcase, no points of user confusion were brought up and we gained insights when presenting. Some of our users noted how it was interesting to learn about coffee exports in Barbados and how their top exports of coffee were mostly to other countries within the Caribbean region. The imports and exports cross-reference button also led users down rabbit holes tracing trade and comparing GDP and undernourishment data all across the world.</p>
      <span class="header">Future Work </span><i>How we intend to improve this work</i>
      <p>In terms of future work, we would like to improve the web application’s loading time. As of now, we are limited by our very large dataset (120+ MB). We believe that there is a lot more data removal and compression we can do to further decrease the size of the dataset, and we would love to implement some form of DBMS. We would also like to improve some visual aspects with a more modern design language.</p>
    </div>
  </div>
  <!-- JS Imports -->
  <script src="lib/d3.v5.min.js"></script>
  <script src="lib/d3-fetch.v2.min.js"></script>
  <script src="lib/dataframe.min.js"></script>
  <script src="lib/tinycolor.min.js"></script>
  <script src="lib/d3-legend.min.js"></script>

  <!-- Main JS -->
  <script src="main.js"></script>
</body>
</html>